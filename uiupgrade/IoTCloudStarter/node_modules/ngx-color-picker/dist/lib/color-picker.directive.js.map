{"version":3,"file":"color-picker.directive.js","sourceRoot":"","sources":["../../src/lib/color-picker.directive.ts"],"names":[],"mappings":"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","sourcesContent":["import { Directive, OnChanges, OnDestroy, Input, Output, EventEmitter,\n  HostListener, ApplicationRef, ComponentRef, ElementRef, ViewContainerRef,\n  Injector, ReflectiveInjector, ComponentFactoryResolver } from '@angular/core';\n\nimport { ColorPickerService } from './color-picker.service';\nimport { ColorPickerComponent } from './color-picker.component';\n\nimport { AlphaChannel, ColorMode, OutputFormat } from './helpers';\n\n@Directive({\n  selector: '[colorPicker]',\n  exportAs: 'ngxColorPicker'\n})\nexport class ColorPickerDirective implements OnChanges, OnDestroy {\n  private dialog: any;\n\n  private dialogCreated: boolean = false;\n  private ignoreChanges: boolean = false;\n\n  private cmpRef: ComponentRef<ColorPickerComponent>;\n\n  @Input() colorPicker: string;\n\n  @Input() cpWidth: string = '230px';\n  @Input() cpHeight: string = 'auto';\n\n  @Input() cpToggle: boolean = false;\n  @Input() cpDisabled: boolean = false;\n\n  @Input() cpIgnoredElements: any = [];\n\n  @Input() cpFallbackColor: string = '';\n\n  @Input() cpColorMode: ColorMode = 'color';\n\n  @Input() cpCmykEnabled: boolean = false;\n\n  @Input() cpOutputFormat: OutputFormat = 'auto';\n  @Input() cpAlphaChannel: AlphaChannel = 'enabled';\n\n  @Input() cpDisableInput: boolean = false;\n\n  @Input() cpDialogDisplay: string = 'popup';\n\n  @Input() cpSaveClickOutside: boolean = true;\n  @Input() cpCloseClickOutside: boolean = true;\n\n  @Input() cpUseRootViewContainer: boolean = false;\n\n  @Input() cpPosition: string = 'right';\n  @Input() cpPositionOffset: string = '0%';\n  @Input() cpPositionRelativeToArrow: boolean = false;\n\n  @Input() cpOKButton: boolean = false;\n  @Input() cpOKButtonText: string = 'OK';\n  @Input() cpOKButtonClass: string = 'cp-ok-button-class';\n\n  @Input() cpCancelButton: boolean = false;\n  @Input() cpCancelButtonText: string = 'Cancel';\n  @Input() cpCancelButtonClass: string = 'cp-cancel-button-class';\n\n  @Input() cpPresetLabel: string = 'Preset colors';\n  @Input() cpPresetColors: string[];\n  @Input() cpMaxPresetColorsLength: number = 6;\n\n  @Input() cpPresetEmptyMessage: string = 'No colors added';\n  @Input() cpPresetEmptyMessageClass: string = 'preset-empty-message';\n\n  @Input() cpAddColorButton: boolean = false;\n  @Input() cpAddColorButtonText: string = 'Add color';\n  @Input() cpAddColorButtonClass: string = 'cp-add-color-button-class';\n\n  @Input() cpRemoveColorButtonClass: string = 'cp-remove-color-button-class';\n\n  @Output() cpInputChange = new EventEmitter<any>(true);\n\n  @Output() cpToggleChange = new EventEmitter<boolean>(true);\n\n  @Output() cpSliderChange = new EventEmitter<any>(true);\n  @Output() cpSliderDragEnd = new EventEmitter<string>(true);\n  @Output() cpSliderDragStart = new EventEmitter<string>(true);\n\n  @Output() colorPickerOpen = new EventEmitter<string>(true);\n  @Output() colorPickerClose = new EventEmitter<string>(true);\n\n  @Output() colorPickerCancel = new EventEmitter<string>(true);\n  @Output() colorPickerSelect = new EventEmitter<string>(true);\n  @Output() colorPickerChange = new EventEmitter<string>(false);\n\n  @Output() cpCmykColorChange = new EventEmitter<string>(true);\n\n  @Output() cpPresetColorsChange = new EventEmitter<any>(true);\n\n  @HostListener('click') handleClick(): void {\n    this.inputFocus();\n  }\n\n  @HostListener('focus') handleFocus(): void {\n    this.inputFocus();\n  }\n\n  @HostListener('input', ['$event']) handleInput(event: any): void {\n    this.inputChange(event);\n  }\n\n  constructor(private injector: Injector, private cfr: ComponentFactoryResolver,\n    private appRef: ApplicationRef, private vcRef: ViewContainerRef, private elRef: ElementRef,\n    private _service: ColorPickerService) {}\n\n  ngOnDestroy(): void {\n    if (this.cmpRef !== undefined) {\n      this.cmpRef.destroy();\n    }\n  }\n\n  ngOnChanges(changes: any): void {\n    if (changes.cpToggle && !this.cpDisabled) {\n      if (changes.cpToggle.currentValue) {\n        this.openDialog();\n      } else if (!changes.cpToggle.currentValue) {\n        this.closeDialog();\n      }\n    }\n\n    if (changes.colorPicker) {\n      if (this.dialog && !this.ignoreChanges) {\n        if (this.cpDialogDisplay === 'inline') {\n          this.dialog.setInitialColor(changes.colorPicker.currentValue);\n        }\n\n        this.dialog.setColorFromString(changes.colorPicker.currentValue, false);\n\n        if (this.cpUseRootViewContainer && this.cpDialogDisplay !== 'inline') {\n          this.cmpRef.changeDetectorRef.detectChanges();\n        }\n      }\n\n      this.ignoreChanges = false;\n    }\n\n    if (changes.cpPresetLabel || changes.cpPresetColors) {\n      if (this.dialog) {\n        this.dialog.setPresetConfig(this.cpPresetLabel, this.cpPresetColors);\n      }\n    }\n  }\n\n  public openDialog(): void {\n    if (!this.dialogCreated) {\n      let vcRef = this.vcRef;\n\n      this.dialogCreated = true;\n\n      if (this.cpUseRootViewContainer && this.cpDialogDisplay !== 'inline') {\n        const classOfRootComponent = this.appRef.componentTypes[0];\n        const appInstance = this.injector.get(classOfRootComponent);\n\n        vcRef = appInstance.vcRef || appInstance.viewContainerRef || this.vcRef;\n\n        if (vcRef === this.vcRef) {\n          console.warn('You are using cpUseRootViewContainer, ' +\n            'but the root component is not exposing viewContainerRef!' +\n            'Please expose it by adding \\'public vcRef: ViewContainerRef\\' to the constructor.');\n        }\n      }\n\n      const compFactory = this.cfr.resolveComponentFactory(ColorPickerComponent);\n      const injector = ReflectiveInjector.fromResolvedProviders([], vcRef.parentInjector);\n\n      this.cmpRef = vcRef.createComponent(compFactory, 0, injector, []);\n\n      this.cmpRef.instance.setupDialog(this, this.elRef, this.colorPicker,\n        this.cpWidth, this.cpHeight, this.cpDialogDisplay, this.cpFallbackColor, this.cpColorMode,\n        this.cpCmykEnabled, this.cpAlphaChannel, this.cpOutputFormat, this.cpDisableInput,\n        this.cpIgnoredElements, this.cpSaveClickOutside, this.cpCloseClickOutside,\n        this.cpUseRootViewContainer, this.cpPosition, this.cpPositionOffset,\n        this.cpPositionRelativeToArrow, this.cpPresetLabel, this.cpPresetColors,\n        this.cpMaxPresetColorsLength, this.cpPresetEmptyMessage, this.cpPresetEmptyMessageClass,\n        this.cpOKButton, this.cpOKButtonClass, this.cpOKButtonText,\n        this.cpCancelButton, this.cpCancelButtonClass, this.cpCancelButtonText,\n        this.cpAddColorButton, this.cpAddColorButtonClass, this.cpAddColorButtonText,\n        this.cpRemoveColorButtonClass);\n\n      this.dialog = this.cmpRef.instance;\n\n      if (this.vcRef !== vcRef) {\n        this.cmpRef.changeDetectorRef.detectChanges();\n      }\n    } else if (this.dialog) {\n      this.dialog.openDialog(this.colorPicker);\n    }\n  }\n\n  public closeDialog(): void {\n    if (this.dialog && this.cpDialogDisplay === 'popup') {\n      this.dialog.closeDialog();\n    }\n  }\n\n  public cmykChanged(value: string): void {\n    this.cpCmykColorChange.emit(value);\n  }\n\n  public stateChanged(state: boolean): void {\n    this.cpToggleChange.emit(state);\n\n    if (state) {\n      this.colorPickerOpen.emit(this.colorPicker);\n    } else {\n      this.colorPickerClose.emit(this.colorPicker);\n    }\n  }\n\n  public colorChanged(value: string, ignore: boolean = true): void {\n    this.ignoreChanges = ignore;\n\n    this.colorPickerChange.emit(value);\n  }\n\n  public colorSelected(value: string): void {\n    this.colorPickerSelect.emit(value);\n  }\n\n  public colorCanceled(): void {\n    this.colorPickerCancel.emit();\n  }\n\n  public inputFocus(): void {\n    const element = this.elRef.nativeElement;\n\n    const ignored = this.cpIgnoredElements.filter((item: any) => item === element);\n\n    if (!this.cpDisabled && !ignored.length) {\n      if (typeof document !== 'undefined' && element === document.activeElement) {\n        this.openDialog();\n      } else if (!this.dialog || !this.dialog.show) {\n        this.openDialog();\n      } else {\n        this.closeDialog();\n      }\n    }\n  }\n\n  public inputChange(event: any): void {\n    if (this.dialog) {\n      this.dialog.setColorFromString(event.target.value, true);\n    } else {\n      this.colorPicker = event.target.value;\n\n      this.colorPickerChange.emit(this.colorPicker);\n    }\n  }\n\n  public inputChanged(event: any): void {\n    this.cpInputChange.emit(event);\n  }\n\n  public sliderChanged(event: any): void {\n    this.cpSliderChange.emit(event);\n  }\n\n  public sliderDragEnd(event: any): void {\n    this.cpSliderDragEnd.emit(event);\n  }\n\n  public sliderDragStart(event: any): void {\n    this.cpSliderDragStart.emit(event);\n  }\n\n  public presetColorsChanged(value: any[]): void {\n    this.cpPresetColorsChange.emit(value);\n  }\n}\n"]}